{"ast":null,"code":"import _slicedToArray from\"/media/pratham/Pratham/slot-book-app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Form,Button}from'react-bootstrap';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import FormContainer from'../components/FormContainer';import{listSlotDetails,updateSlot}from'../redux/actions/slotActions';import Message from'../components/Message';import ReactLoading from'react-loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SlotScreen=function SlotScreen(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),firstname=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),lastname=_useState4[0],setLastName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),mobile=_useState6[0],setMobile=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),action=_useState10[0],setAction=_useState10[1];// DISPATCH\nvar dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;// CREATE POST REDUCER\nvar slotDetails=useSelector(function(state){return state.slotDetails;});var loading=slotDetails.loading,slot=slotDetails.slot,error=slotDetails.error;var slotUpdate=useSelector(function(state){return state.slotUpdate;});var loadingUpdate=slotUpdate.loading,success=slotUpdate.success,errorUpdate=slotUpdate.error;useEffect(function(){if(!userInfo){history.push('/login');}else{var _slot$slotData;if((slot===null||slot===void 0?void 0:(_slot$slotData=slot.slotData)===null||_slot$slotData===void 0?void 0:_slot$slotData._id)!==match.params.id){dispatch(listSlotDetails(match.params.id));}else{var _slot$slotData2,_slot$slotData6;if(slot===null||slot===void 0?void 0:(_slot$slotData2=slot.slotData)===null||_slot$slotData2===void 0?void 0:_slot$slotData2.isBooked){var _slot$slotData3,_slot$slotData4,_slot$slotData5;setFirstName(slot===null||slot===void 0?void 0:(_slot$slotData3=slot.slotData)===null||_slot$slotData3===void 0?void 0:_slot$slotData3.firstname);setLastName(slot===null||slot===void 0?void 0:(_slot$slotData4=slot.slotData)===null||_slot$slotData4===void 0?void 0:_slot$slotData4.lastname);setMobile(slot===null||slot===void 0?void 0:(_slot$slotData5=slot.slotData)===null||_slot$slotData5===void 0?void 0:_slot$slotData5.mobile);}setAction((slot===null||slot===void 0?void 0:(_slot$slotData6=slot.slotData)===null||_slot$slotData6===void 0?void 0:_slot$slotData6.isBooked)?'Update':'Create');}}},[history,userInfo,slot,dispatch,match]);useEffect(function(){if(success){dispatch(listSlotDetails(match.params.id));}},[dispatch,success,match]);// SUBMIT HANDLER\nvar submitHandler=function submitHandler(e){e.preventDefault();if(!firstname||!lastname||!mobile){setMessage('All fields are required');}else{// DISPATCH CREATE POST\ndispatch(updateSlot(firstname,lastname,mobile,match.params.id));// REDIRECT TO HOMEPAGE\nhistory.push('/');}};var cancelHandler=function cancelHandler(e){e.preventDefault();setFirstName('');setLastName('');setMobile('');};return/*#__PURE__*/ (// LOCAL STATES FOR INPUT\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn btn-light my-3\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-circle-left text-dark\",children:\" GO BACK\"})}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center text-secondary my-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-clock text-info\"}),\" BOOK SLOT\"]}),message&&/*#__PURE__*/_jsxs(Message,{variant:\"warning\",children:[\" \",message]}),error&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error]}),errorUpdate&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error]}),loadingUpdate&&/*#__PURE__*/_jsx(ReactLoading,{className:\"m-auto\",type:\"spin\",color:\"#33C1FF\",height:'10%',width:'10%'}),loading&&/*#__PURE__*/_jsx(ReactLoading,{className:\"m-auto\",type:\"spin\",color:\"#33C1FF\",height:'10%',width:'10%'}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"firstname\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"firstname \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"enter firstname\",value:firstname,onChange:function onChange(e){return setFirstName(e.target.value);},style:{borderLeft:'5px solid #33C1FF'}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"lastname\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"lastname \"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"enter your lastname\",value:lastname,onChange:function onChange(e){return setLastName(e.target.value);},style:{borderLeft:'5px solid #33C1FF'}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"mobile\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"mobile \"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"enter mobile\",type:\"number\",value:mobile,onChange:function onChange(e){return setMobile(e.target.value);},style:{borderLeft:'5px solid #33C1FF'}})]}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",className:\"btn btn-block btn-info py-2\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-save\"}),\" \",action]}),/*#__PURE__*/_jsxs(Button,{type:\"btn\",onClick:cancelHandler,className:\"btn btn-block btn-danger py-2\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-backspace\"}),\" Cancel\"]})]})]})]}));};export default SlotScreen;","map":{"version":3,"sources":["/media/pratham/Pratham/slot-book-app/frontend/src/screens/SlotScreen.jsx"],"names":["React","useState","useEffect","Form","Button","Link","useDispatch","useSelector","FormContainer","listSlotDetails","updateSlot","Message","ReactLoading","SlotScreen","match","history","firstname","setFirstName","lastname","setLastName","mobile","setMobile","message","setMessage","action","setAction","dispatch","userLogin","state","userInfo","slotDetails","loading","slot","error","slotUpdate","loadingUpdate","success","errorUpdate","push","slotData","_id","params","id","isBooked","submitHandler","e","preventDefault","cancelHandler","target","value","borderLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport FormContainer from '../components/FormContainer';\nimport { listSlotDetails, updateSlot } from '../redux/actions/slotActions';\nimport Message from '../components/Message';\nimport ReactLoading from 'react-loading';\n\nconst SlotScreen = ({ match, history }) => {\n  const [firstname, setFirstName] = useState('');\n  const [lastname, setLastName] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [message, setMessage] = useState('');\n  const [action, setAction] = useState('');\n\n  // DISPATCH\n  const dispatch = useDispatch();\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  // CREATE POST REDUCER\n  const slotDetails = useSelector((state) => state.slotDetails);\n  const { loading, slot, error } = slotDetails;\n\n  const slotUpdate = useSelector((state) => state.slotUpdate);\n  const { loading: loadingUpdate, success, error: errorUpdate } = slotUpdate;\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push('/login');\n    } else {\n      if (slot?.slotData?._id !== match.params.id) {\n        dispatch(listSlotDetails(match.params.id));\n      } else {\n        if (slot?.slotData?.isBooked) {\n          setFirstName(slot?.slotData?.firstname);\n          setLastName(slot?.slotData?.lastname);\n          setMobile(slot?.slotData?.mobile);\n        }\n        setAction(slot?.slotData?.isBooked ? 'Update' : 'Create');\n      }\n    }\n  }, [history, userInfo, slot, dispatch, match]);\n\n  useEffect(() => {\n    if (success) {\n      dispatch(listSlotDetails(match.params.id));\n    }\n  }, [dispatch, success, match]);\n\n  // SUBMIT HANDLER\n  const submitHandler = (e) => {\n    e.preventDefault();\n\n    if (!firstname || !lastname || !mobile) {\n      setMessage('All fields are required');\n    } else {\n      // DISPATCH CREATE POST\n      dispatch(updateSlot(firstname, lastname, mobile, match.params.id));\n      // REDIRECT TO HOMEPAGE\n      history.push('/');\n    }\n  };\n\n  const cancelHandler = (e) => {\n    e.preventDefault();\n    setFirstName('');\n    setLastName('');\n    setMobile('');\n  };\n\n  return (\n    // LOCAL STATES FOR INPUT\n\n    <>\n      <Link to=\"/\" className=\"btn btn-light my-3\">\n        <i className=\"fas fa-arrow-circle-left text-dark\"> GO BACK</i>\n      </Link>\n      <FormContainer>\n        <h2 className=\"text-center text-secondary my-2\">\n          <i className=\"fas fa-clock text-info\"></i> BOOK SLOT\n        </h2>\n        {message && <Message variant=\"warning\"> {message}</Message>}\n        {error && <Message variant=\"danger\"> {error}</Message>}\n        {errorUpdate && <Message variant=\"danger\"> {error}</Message>}\n\n        {loadingUpdate && (\n          <ReactLoading\n            className=\"m-auto\"\n            type=\"spin\"\n            color=\"#33C1FF\"\n            height={'10%'}\n            width={'10%'}\n          />\n        )}\n\n        {loading && (\n          <ReactLoading\n            className=\"m-auto\"\n            type=\"spin\"\n            color=\"#33C1FF\"\n            height={'10%'}\n            width={'10%'}\n          />\n        )}\n\n        <Form onSubmit={submitHandler}>\n          <Form.Group controlId=\"firstname\">\n            <Form.Label>firstname </Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"enter firstname\"\n              value={firstname}\n              onChange={(e) => setFirstName(e.target.value)}\n              style={{ borderLeft: '5px solid #33C1FF' }}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"lastname\">\n            <Form.Label>lastname </Form.Label>\n            <Form.Control\n              type=\"text\"\n              placeholder=\"enter your lastname\"\n              value={lastname}\n              onChange={(e) => setLastName(e.target.value)}\n              style={{ borderLeft: '5px solid #33C1FF' }}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"mobile\">\n            <Form.Label>mobile </Form.Label>\n            <Form.Control\n              placeholder=\"enter mobile\"\n              type=\"number\"\n              value={mobile}\n              onChange={(e) => setMobile(e.target.value)}\n              style={{ borderLeft: '5px solid #33C1FF' }}\n            ></Form.Control>\n          </Form.Group>\n\n          <Button type=\"submit\" className=\"btn btn-block btn-info py-2\">\n            <i class=\"fas fa-save\"></i> {action}\n          </Button>\n          <Button\n            type=\"btn\"\n            onClick={cancelHandler}\n            className=\"btn btn-block btn-danger py-2\"\n          >\n            <i class=\"fas fa-backspace\"></i> Cancel\n          </Button>\n        </Form>\n      </FormContainer>\n    </>\n  );\n};\n\nexport default SlotScreen;\n"]},"metadata":{},"sourceType":"module"}